<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script>
  function enableTracking() {
    window['ga-disable-GA_MEASUREMENT_ID'] = false;
  }

  function disableTracking() {
    window['ga-disable-GA_MEASUREMENT_ID'] = true;
  }

  window.cookieconsent.initialise({
    palette: {
      popup: {
        background: '#edeff5',
        text: '#838391'
      },
      button: {
        background: '#4b81e8'
      }
    },
    onInitialise: function () {
      const type = this.options.type;
      const didConsent = this.hasConsented();
      if (type === 'opt-in' && didConsent) {
        enableTracking();
      } else if (type === 'opt-out' && !didConsent) {
        disableTracking();
      }
    },
    onStatusChange: function() {
      const type = this.options.type;
      const didConsent = this.hasConsented();
      if (type === 'opt-in' && didConsent) {
        enableTracking();
      } else if (type === 'opt-out' && !didConsent) {
        disableTracking();
      }
    },
    onRevokeChoice: function() {
      const type = this.options.type;
      if (type === 'opt-in') {
        disableTracking();
      } else if (type === 'opt-out') {
        enableTracking();
      }
    }
  });
</script>
